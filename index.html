<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>SlotJS / Circular slot machine mobile-first SPA built using JavaScript, CSS variables and Emojis!</title><meta name="author" content="Daniel GÃ¡mez Franco"><meta name="description" content="Circular slot machine mobile-first SPA built using JavaScript, CSS variables and Emojis!"><link rel="shortcut icon" href="./favicon.ico"><style>.sm__base {
  --wrapperSize: 100%;
  --reelSize: 32px;
  --displaySize: 96px;
  --displayZoom: 2;
  --shadowWeight: 1;
  position: relative;
  width: var(--wrapperSize);
  height: var(--wrapperSize);
  box-sizing: border-box;
  pointer-events: none;
  -webkit-transform-origin: left center;
          transform-origin: left center;
  will-change: transform; }
  .sm__base.has-zoom {
    -webkit-transform: scale(var(--displayZoom));
            transform: scale(var(--displayZoom)); }

.sm__reelsContainer {
  position: relative;
  width: 100%;
  height: 100%; }

.sm__reel {
  --i: 0;
  --bg: transparent;
  position: absolute;
  top: calc( var(--index) * var(--reelSize));
  left: calc( var(--index) * var(--reelSize));
  width: calc(100% - var(--index) * 2 * var(--reelSize));
  height: calc(100% - var(--index) * 2 * var(--reelSize));
  background: var(--bg);
  border-radius: 100%;
  overflow: hidden;
  box-shadow: 0 0 calc(var(--shadowWeight) * var(--reelSize)) 0 rgba(0, 0, 0, 0.125);
  will-change: transform; }
  .sm__reel:first-child, .sm__reel:last-child {
    box-shadow: none; }

.sm__cell {
  position: absolute;
  height: var(--reelSize);
  line-height: var(--reelSize);
  font-size: calc(var(--reelSize) / 2);
  top: 50%;
  left: 0;
  width: 50%;
  margin-top: calc(var(--reelSize) / -2);
  -webkit-transform-origin: center right;
          transform-origin: center right; }
  .sm__cell--has-shadow {
    transition: opacity linear .125s; }
    .is-stop .sm__cell--has-shadow {
      opacity: 0 !important; }
  .sm__cell--has-blur {
    -webkit-filter: blur(calc(var(--reelSize) / 8));
            filter: blur(calc(var(--reelSize) / 8)); }

.sm__figure {
  display: inline-block;
  text-align: center;
  width: var(--reelSize); }

.sm__display {
  position: absolute;
  top: 50%;
  left: 0;
  width: var(--displaySize);
  height: var(--reelSize);
  margin-top: calc(var(--reelSize) / -2); }
  .sm__display--background {
    z-index: -1; }
  .sm__display--shadow {
    border-radius: 0 0 2px 2px;
    box-shadow: 0 calc(var(--reelSize) / 2) calc(var(--shadowWeight) * var(--reelSize)) calc(var(--reelSize) / -8) rgba(0, 0, 0, 0.25); }

.app__base {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  max-width: 800px;
  margin: 0 auto;
  font-weight: bold;
  font-size: 16px;
  line-height: 16px; }

.app__header {
  box-shadow: 0 64px 128px -40px rgba(0, 0, 0, 0.25); }

.app__title {
  padding: 24px 16px;
  margin: 0;
  font-size: 24px;
  line-height: 24px;
  text-align: center; }

.app__state {
  margin: 0;
  list-style: none;
  display: flex;
  padding: 0;
  justify-content: center;
  overflow: hidden; }

.app__prop {
  padding: 16px;
  width: 33.33333333%;
  display: flex;
  box-sizing: border-box; }

.app__prop + .app__prop {
  border-left: 1px solid #F0F0F0; }

.app__icon {
  padding: 0 12px 0 0; }

.app__value {
  flex: 1 0 auto; }

.app__main {
  position: relative;
  padding: 16px;
  flex: 1 0 auto;
  height: 0;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center; }

.app__footer {
  text-align: center;
  max-width: 100vw;
  box-sizing: border-box; }

.app__link {
  padding: 16px 64px;
  display: inline-block;
  text-decoration: none;
  color: black;
  text-transform: uppercase;
  box-shadow: 0 -12px 32px -16px rgba(0, 0, 0, 0.25); }
  .app__linkUnderline {
    box-shadow: inset 0 -3px 0 0 rgba(255, 200, 0, 0.5); }
  .app__link:hover > .app__linkUnderline {
    box-shadow: inset 0 -3px 0 0 #ffc800; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: monospace; }</style></head><body class="app__base"><header class="app__header"><h1 class="app__title"><span role="img" aria-label="Slot Machine">ğŸ°</span> SlotJS</h1><ul class="app__state"><li class="app__prop"><span class="app__icon" role="img" aria-label="Coins">ğŸ’¶</span> <span class="app__value" id="coins">0</span></li><li class="app__prop"><span class="app__icon" role="img" aria-label="Jackpot">ğŸ’°</span> <span class="app__value" id="jackpot">0</span></li><li class="app__prop"><span class="app__icon" role="img" aria-label="Spins">ğŸ©</span> <span class="app__value" id="spins">0</span></li></ul></header><main class="app__main" id="main"><section class="sm__base"><div class="sm__display sm__display--background"></div><div class="sm__reelsContainer"></div><div class="sm__display sm__display--shadow"></div></section></main><footer class="app__footer"><a class="app__link" href="https://github.com/Danziger/slotjs">ğŸ‘¨â€ğŸ’» <span class="app__linkUnderline">Check it out on GitHub</span></a></footer><script>!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=0)}([function(t,e,n){n(4),t.exports=n(3)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=["ğŸ’€","ğŸ‹","ğŸŠ","ğŸ‰","ğŸ‡","ğŸ“","ğŸ’","ğŸ””","ğŸ€","ğŸ’"],o=[i,["â›„","ğŸ¦Œ","ğŸ„","ğŸ€","ğŸ","ğŸ†","ğŸ¾","ğŸ””","ğŸ…","ğŸŒŸ"],["ğŸŒš","ğŸº","ğŸƒ","ğŸ§ ","ğŸ‘¹","ğŸ‘½","ğŸ‘»","ğŸ§Ÿâ€","ğŸ§›â€","ğŸ’€"],["ğŸ­","ğŸ±","ğŸ¦€","ğŸ","ğŸ“","ğŸ","ğŸŸ","ğŸ¸","ğŸ¦Šâ€","ğŸ¦"],["âš½","ğŸ€","ğŸˆ","âš¾","ğŸ¾","ğŸ","ğŸ‰","ğŸ±","ğŸ¥Šâ€","ğŸ¯"]],r=o[Math.random()*o.length|0],a=null;function s(t,e,n,i,o){var r=[e,n-.25*i,n+.125*i,n-.0625*i,n+.03125*i,n-.015625*i,n],s=e,l=0,c=r.map(function(t){var e=Math.max(Math.abs(t-s)/Math.abs(o),10);return s=t,l+=e,e}),u=0;return function(t,e){a||((a=document.createElement("style")).type="text/css",document.head.appendChild(a)),a.sheet.insertRule("@keyframes ".concat(t," {\n        ").concat(e,"\n    }"),a.length)}(t,c.map(function(t){var e=u+t/l*100;return u=e,e}).map(function(t,e){return"".concat(Math.round(t),"% { transform: rotate(").concat(r[e].toFixed(2),"deg); }")}).join("\n")),l}var l=/iPad|iPhone|iPod/.test(navigator.platform||""),c=navigator.userAgent.toLowerCase().includes("firefox");function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sounds=[],this.nextSound=0,this.totalSounds=0;for(var o=this.sounds,r=0;r<i;++r)o.push(new Audio(e));o[0].oncanplay=function(){n.totalSounds=i}}var e,n,i;return e=t,(n=[{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.sounds,n=this.nextSound,i=this.totalSounds,o=e[n];i&&o.paused&&(o.volume=t,o.play(),this.nextSound=(n+1)%i)}}])&&u(e.prototype,n),i&&u(e,i),t}(),p=c?"ogg":"mp3",f=new h("./assets/blip.".concat(p),32),d=new h("./assets/coin.".concat(p)),m=new h("./assets/stop.".concat(p)),v=new h("./assets/unlucky.".concat(p)),y=new h("./assets/win.".concat(p)),_=function(){f.play.apply(f,arguments)},S=function(){d.play.apply(d,arguments)},I=function(){m.play.apply(m,arguments)},E=function(){v.play.apply(v,arguments)},g=function(){y.play.apply(y,arguments)},O=window.navigator,C=O.vibrate?O.vibrate.bind(O):function(){},T=[200,50,50,50,50,25,25,25,25,25,25,25,25],b=[25,25,25,25,25,25,25,25,50,50,50,50,50],A=function(){C(b)},P=function(){C(T)},w=!1,k=null;function R(){w=!0}function N(){w=!1}function L(){w&&(k(),w=!1)}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=document.createElement("DIV");return o.className=Array.isArray(t)?t.join(" "):t,"string"==typeof e?o.innerText=e:e&&o.appendChild(e),i&&(o.style=i),null!==n&&(o.style.transform="rotate(".concat(n,"deg)")),o}function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var x=function(){function t(e,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=void 0,this.style=void 0,this.index=void 0,this.alpha=void 0,this.shadowCount=void 0,this.angle=0,this.stopAt=0,this.index=e,this.alpha=n;var r=t.C_REEL,a=t.C_CELL,s=t.C_CELL_SHADOW,l=t.C_CELL_BLUR,u=t.C_FIGURE,h=t.C_IS_STOP,p=t.V_INDEX,f=this.root=M([r,h]);if((this.style=f.style).setProperty(p,e),i){var d,m;c?(d=[a,s],m=.5):(d=[a,s,l],m=1);var v=this.shadowCount=Math.max(2,Math.round((o-.5-2*e)*Math.PI/i.length)),y=1/v;!function(t){for(var e=t.length-1;e>0;--e){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}}(i),i.forEach(function(t,e){var i=M(u,t),o=M(a,i,e*n);f.appendChild(o);for(var r=1;r<v;++r)f.appendChild(M(d,i.cloneNode(!0),n*(e+y*r),"opacity: ".concat(m*(1-y*r),"; ")))})}}var e,n,i;return e=t,(n=[{key:"reset",value:function(){var t=this.root,e=this.style,n=this.stopAt;t.classList.remove("is-stop"),e.transform="rotate(".concat(this.angle=(360-n)%360,"deg)"),e.animation="",this.stopAt=0}},{key:"stop",value:function(e,n){var i=this.alpha,o=this.root,r=(360-this.angle-n)%360,a=Math.ceil(r/i),l=a*i,c="stop-".concat(this.index),u=s(c,(360-r)%360,(360-l)%360,i,e)*t.STOP_ANIMATION_DURATION_MULTIPLIER;return this.stopAt=l,this.style.animation="".concat(c," ").concat(u,"ms ease-out forwards"),o.classList.add(t.C_IS_STOP),(o.children[a*this.shadowCount]||o.children[0]).innerText}}])&&j(e.prototype,n),i&&j(e,i),t}();x.C_REEL="sm__reel",x.C_CELL="sm__cell",x.C_CELL_SHADOW="sm__cell--has-shadow",x.C_CELL_BLUR="sm__cell--has-blur",x.C_FIGURE="sm__figure",x.C_IS_STOP="is-stop",x.V_INDEX="--index",x.STOP_ANIMATION_DURATION_MULTIPLIER=5;n(1);function D(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var U=function(){function t(e,n,o){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-.8;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrapper=void 0,this.root=document.querySelector(t.S_BASE),this.reelsContainer=document.querySelector(t.S_REELS_CONTAINER),this.display=document.querySelector(t.S_DISPLAY),this.reels=[],this.blipFading=void 0,this.reelCount=void 0,this.symbols=void 0,this.alpha=void 0,this.speed=void 0,this.zoomTransitionTimeoutID=null,this.currentCombination=[],this.currentPrize=null,this.currentReel=null,this.blipCounter=0,this.lastUpdate=0,this.init(e,n,o,a,s,c),window.onresize=this.handleResize.bind(this),document.onkeydown=this.handleKeyDown.bind(this),r=this.handleClick.bind(this),k=r,l?(document.ontouchstart=R,document.ontouchmove=N,document.ontouchcancel=N,document.ontouchend=L):document.onclick=r}var e,n,o;return e=t,(n=[{key:"init",value:function(e,n,i,o,r,a){this.wrapper=e,this.handleUseCoin=n,this.handleGetPrice=i,this.reelCount=o,this.symbols=r,this.speed=a,this.blipFading=1/o;var s=this.alpha=360/r.length,l=D(r),u=2*o+t.UNITS_CENTER;this.resize(),c&&this.root.style.setProperty(t.V_SHADOW_WEIGHT,t.FIREFOX_SHADOW_WEIGHT);for(var h=this.reelsContainer,p=this.reels,f=0;f<o;++f){var d=new x(f,s,l,u);h.appendChild(d.root),p.push(d)}h.appendChild(new x(o).root)}},{key:"start",value:function(){var t=this;this.handleUseCoin(),this.currentCombination=[],this.currentPrize=null,this.currentReel=0,this.zoomOut(),this.reels.forEach(function(t){return t.reset()}),a&&(a.remove(),a=null),S(),A(),this.lastUpdate=performance.now(),requestAnimationFrame(function(){return t.tick()})}},{key:"stop",value:function(){this.currentReel=null,this.zoomIn();var t=this.currentPrize;t?(g(),this.handleGetPrice.apply(this,D(t))):E()}},{key:"tick",value:function(){var e=this,n=this.reels,i=this.speed,o=this.currentReel,r=this.lastUpdate,a=performance.now(),s=(a-r)*i;if(null!==o){0===(this.blipCounter=(this.blipCounter+1)%t.BLIP_RATE)&&_(1-this.blipFading*o),this.lastUpdate=a;for(var l=n.length-1;l>=o;--l){var c=n[l],u=c.angle=(360+(c.angle+s))%360;c.style.transform="rotate(".concat(u,"deg)")}requestAnimationFrame(function(){return e.tick()})}}},{key:"zoomIn",value:function(){this.zoom()}},{key:"zoomOut",value:function(){this.zoom(!0)}},{key:"zoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(this.zoomTransitionTimeoutID);var n=this.root;n.style.transition=t.ZOOM_TRANSITION,n.classList[e?"remove":"add"](t.C_HAS_ZOOM),this.zoomTransitionTimeoutID=setTimeout(function(){n.style.transition=""},t.ZOOM_TRANSITION_DURATION)}},{key:"resize",value:function(){var e=this.wrapper,n=this.root,i=this.reelCount,o=this.display,r=n.style,a=e.offsetWidth,s=e.offsetHeight,l=Math.min(a,s)-t.APP_PADDING,c=l/(2*i+t.UNITS_TOTAL)|0;r.setProperty(t.V_WRAPPER_SIZE,"".concat(l,"px")),r.setProperty(t.V_REEL_SIZE,"".concat(c,"px")),r.setProperty(t.V_DISPLAY_SIZE,"".concat(c*i,"px")),r.setProperty(t.V_DISPLAY_ZOOM,"".concat(n.offsetWidth/o.offsetWidth))}},{key:"stopReel",value:function(t){var e=this.speed,n=(performance.now()-this.lastUpdate)*e;this.currentCombination.push(this.reels[t].stop(e,n)),this.checkPrize(),I(),P()}},{key:"checkPrize",value:function(){for(var t=this.currentReel,e=this.currentCombination,n=this.reelCount,i=this.symbols,o={},r=0,a="",s="",l=0,c=0;c<t;++c){var u=e[c],h=o[u]=a===u?o[u]+1:1;if(a=u,h>r){r=h;var p=i.indexOf(u);p>i.indexOf(s)&&(s=u,l=p+1)}}r>2&&(this.currentPrize=[l,r*(l/i.length)/n])}},{key:"handleResize",value:function(){var t=this;requestAnimationFrame(function(){return t.resize()})}},{key:"handleKeyDown",value:function(t){var e=t.key;" "!==e&&"Enter"!==e||this.handleClick()}},{key:"handleClick",value:function(){var t=this.currentReel;null===t?this.start():(++this.currentReel,this.stopReel(t),t===this.reels.length-1&&this.stop())}}])&&z(e.prototype,n),o&&z(e,o),t}();U.C_HAS_ZOOM="has-zoom",U.S_BASE=".sm__base",U.S_REELS_CONTAINER=".sm__reelsContainer",U.S_DISPLAY=".sm__display",U.V_WRAPPER_SIZE="--wrapperSize",U.V_REEL_SIZE="--reelSize",U.V_DISPLAY_SIZE="--displaySize",U.V_DISPLAY_ZOOM="--displayZoom",U.V_SHADOW_WEIGHT="--shadowWeight",U.UNITS_CENTER=3,U.UNITS_MARGIN=1,U.UNITS_TOTAL=U.UNITS_CENTER+U.UNITS_MARGIN,U.ZOOM_TRANSITION="transform ease-in-out 500ms 250ms",U.ZOOM_TRANSITION_DURATION=1e3,U.BLIP_RATE=4,U.FIREFOX_SHADOW_WEIGHT=.5,U.APP_PADDING=32;n(2);function V(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.coinsElement=document.querySelector(t.S_COINS),this.jackpotElement=document.querySelector(t.S_JACKPOT),this.spinsElement=document.querySelector(t.S_SPINS),this.mainElement=document.querySelector(t.S_MAIN),this.coins=parseInt(localStorage.coins,10)||100,this.jackpot=parseInt(localStorage.jackpot,10)||1e4,this.spins=parseInt(localStorage.spins,10)||0,this.lastSpin=localStorage.lastSpin||0;var e=Date.now();e-this.lastSpin>=t.ONE_DAY&&(localStorage.jackpot=this.jackpot=0|Math.max(5e3,this.jackpot-5e3+1e4*Math.random()),localStorage.lastSpin=e),new U(this.mainElement,this.handleUseCoin.bind(this),this.handleGetPrice.bind(this),5,r),this.refreshView()}var e,n,i;return e=t,(n=[{key:"handleUseCoin",value:function(){localStorage.coins=this.coins=Math.max(this.coins-1,0)||100,localStorage.jackpot=++this.jackpot,localStorage.spins=++this.spins,this.refreshView()}},{key:"handleGetPrice",value:function(t,e){var n=t+Math.round(e*this.jackpot);localStorage.jackpot=this.jackpot=Math.max(this.jackpot-n,0)||1e3,localStorage.coins=this.coins+=n,this.refreshView()}},{key:"refreshView",value:function(){this.coinsElement.innerText=this.coins,this.jackpotElement.innerText=this.jackpot,this.spinsElement.innerText=this.spins}}])&&V(e.prototype,n),i&&V(e,i),t}();W.S_COINS="#coins",W.S_JACKPOT="#jackpot",W.S_SPINS="#spins",W.S_MAIN="#main",W.ONE_DAY=864e5,new W}]);</script></body></html>